<?xml version='1.0' encoding='UTF-8'?>
<workflow xmlns="http://vmware.com/vco/workflow" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xsi:schemaLocation="http://vmware.com/vco/workflow http://vmware.com/vco/workflow/Workflow-v4.xsd" root-name="item11" object-name="workflow:name=generic" id="d5127151-361d-418d-8982-d21079963e5c" version="1.0.3" api-version="6.0.0" allowed-operations="vfe" editor-version="2.0" restartMode="1" resumeFromFailedMode="0">
  <display-name><![CDATA[Generate and Register Hostname]]></display-name>
  <error-handler name="item13">
    <position y="180.00000000000003" x="49.56521739130436"/>
  </error-handler>
  <position y="50.0" x="40.0"/>
  <input>
    <param name="region" type="string"/>
    <param name="dpg" type="VC:DistributedVirtualPortgroup"/>
    <param name="workload" type="string"/>
    <param name="ipaddress" type="string"/>
  </input>
  <output>
    <param name="hostname_out" type="string"/>
    <param name="domain_out" type="string"/>
    <param name="subnet_address" type="string"/>
  </output>
  <attrib name="hostname" type="string" read-only="false">
    <value encoded="n"><![CDATA[]]></value>
  </attrib>
  <attrib name="error_code" type="string" read-only="false">
    <value encoded="n"><![CDATA[]]></value>
  </attrib>
  <attrib name="domain" type="string" read-only="false">
    <value encoded="n"><![CDATA[]]></value>
  </attrib>
  <attrib name="retry_point" type="string" read-only="false">
    <value encoded="n"><![CDATA[]]></value>
  </attrib>
  <attrib name="timeout_date" type="Date" read-only="false">
    <value encoded="n"><![CDATA[20291231112800000+0000]]></value>
  </attrib>
  <workflow-item name="item0" type="end" end-mode="0">
    <in-binding/>
    <position y="120.0" x="800.0"/>
  </workflow-item>
  <workflow-item name="item4" out-name="item7" type="task">
    <display-name><![CDATA[Set Output]]></display-name>
    <script encoded="false"><![CDATA[hostname_out = hostname
domain_out = domain]]></script>
    <in-binding>
      <bind name="hostname" type="string" export-name="hostname"/>
      <bind name="domain" type="string" export-name="domain"/>
    </in-binding>
    <out-binding>
      <bind name="hostname_out" type="string" export-name="hostname_out"/>
      <bind name="domain_out" type="string" export-name="domain_out"/>
    </out-binding>
    <description><![CDATA[Simple task with custom script capability.]]></description>
    <position y="130.0" x="520.0"/>
  </workflow-item>
  <workflow-item name="item5" out-name="item9" catch-name="item13" throw-bind-name="error_code" type="task" script-module="com.shuttle.utils/generateNewHostName">
    <display-name><![CDATA[generateNewHostName]]></display-name>
    <script encoded="false"><![CDATA[//Auto generated script, cannot be modified !
actionResult = System.getModule("com.shuttle.utils").generateNewHostName(region,workload);
]]></script>
    <in-binding>
      <bind name="region" type="string" export-name="region"/>
      <bind name="workload" type="string" export-name="workload"/>
    </in-binding>
    <out-binding>
      <bind name="actionResult" type="string" export-name="hostname"/>
    </out-binding>
    <description><![CDATA[Add a note to the workflow schema.]]></description>
    <position y="60.0" x="240.0"/>
  </workflow-item>
  <workflow-item name="item7" out-name="item0" type="decision-activity" alt-out-name="item8">
    <display-name><![CDATA[isHostExist]]></display-name>
    <script encoded="false"><![CDATA[// Generated by the system, cannot be edited
return true;]]></script>
    <in-binding>
      <bind name="hostname" type="string" export-name="hostname"/>
    </in-binding>
    <out-binding/>
    <reference type="ScriptModule" id="com.shuttle.qip/isHostExist"/>
    <description><![CDATA[Decision activity based on a workflow or an action.]]></description>
    <position y="120.0" x="640.0"/>
  </workflow-item>
  <workflow-item name="item8" throw-bind-name="error_code" type="end" end-mode="1">
    <in-binding/>
    <position y="180.0" x="680.0"/>
  </workflow-item>
  <workflow-item name="item9" out-name="item10" type="task" script-module="com.shuttle.utils/generateDnsDomain">
    <display-name><![CDATA[generateDnsDomain]]></display-name>
    <script encoded="false"><![CDATA[//Auto generated script, cannot be modified !
actionResult = System.getModule("com.shuttle.utils").generateDnsDomain(workload,region);
]]></script>
    <in-binding>
      <bind name="workload" type="string" export-name="workload"/>
      <bind name="region" type="string" export-name="region"/>
    </in-binding>
    <out-binding>
      <bind name="actionResult" type="string" export-name="domain"/>
    </out-binding>
    <description><![CDATA[Add a note to the workflow schema.]]></description>
    <position y="60.0" x="380.0"/>
  </workflow-item>
  <workflow-item name="item10" out-name="item4" type="link" linked-workflow-id="1ba217b3-d066-4df2-8e1a-e0bd5e273d28">
    <display-name><![CDATA[Register Hostname]]></display-name>
    <in-binding>
      <bind name="hostname" type="string" export-name="hostname"/>
      <bind name="domain" type="string" export-name="domain"/>
      <bind name="dpg" type="VC:DistributedVirtualPortgroup" export-name="dpg"/>
      <bind name="ip_address" type="string" export-name="ipaddress"/>
    </in-binding>
    <out-binding>
      <bind name="subnet_address" type="string" export-name="subnet_address"/>
    </out-binding>
    <description><![CDATA[ ]]></description>
    <position y="60.0" x="520.0"/>
  </workflow-item>
  <workflow-item name="item11" out-name="item5" type="task" script-module="com.shuttle.utils/logInputParameters">
    <display-name><![CDATA[logInputParameters]]></display-name>
    <script encoded="false"><![CDATA[//Auto generated script, cannot be modified !
System.getModule("com.shuttle.utils").logInputParameters();
]]></script>
    <in-binding/>
    <out-binding/>
    <description><![CDATA[Add a note to the workflow schema.]]></description>
    <position y="60.0" x="120.0"/>
  </workflow-item>
  <workflow-item name="item13" out-name="item14" type="input">
    <display-name><![CDATA[User interaction]]></display-name>
    <in-binding>
      <bind name="security.group" type="LdapGroup">
        <description><![CDATA[Any user member of this group will be authorized to fill in this form.]]></description>
      </bind>
      <bind name="security.assignees" type="Array/LdapUser">
        <description><![CDATA[Any user from this array of users will be authorized to fill in this form]]></description>
      </bind>
      <bind name="security.assignee.groups" type="Array/LdapGroup">
        <description><![CDATA[Any user member of any of the groups will be authorized to fill in this form.]]></description>
      </bind>
      <bind name="timeout.date" type="Date" export-name="timeout_date">
        <description><![CDATA[If not null, this input item will wait until date and will continue workflow execution.]]></description>
      </bind>
    </in-binding>
    <out-binding>
      <bind name="retry_point" type="string" export-name="retry_point"/>
    </out-binding>
    <presentation/>
    <description><![CDATA[Use this element to set up a user interaction.]]></description>
    <position y="190.00000000000003" x="183.47826086956525"/>
  </workflow-item>
  <workflow-item name="item14" type="switch">
    <display-name><![CDATA[Switch]]></display-name>
    <script encoded="false"><![CDATA[// Generated by the system, cannot be edited
if (retry_point === "generateNewHostName") {
  return "item5";
} else if (retry_point === "Register Hostname") {
  return "item10";
} else if (retry_point === "Abort") {
  return "item8";
} else if (true) {
  return "item8";
}
]]></script>
    <in-binding>
      <bind name="retry_point" type="string" export-name="retry_point"/>
    </in-binding>
    <out-binding/>
    <condition name="retry_point" type="string" comparator="0" label="item5">generateNewHostName</condition>
    <condition name="retry_point" type="string" comparator="0" label="item10">Register Hostname</condition>
    <condition name="retry_point" type="string" comparator="0" label="item8">Abort</condition>
    <condition name="" type="boolean" comparator="6" label="item8"/>
    <description><![CDATA[Basic switch activity based on a workflow attribute or parameter.]]></description>
    <position y="190.00000000000003" x="357.3913043478261"/>
  </workflow-item>
  <presentation/>
</workflow>